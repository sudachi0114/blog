---
title: "拡張子のないファイルを gitignore"
date: 2020-10-16T18:00:57+09:00
draft: false
tags: ["git", "GitHub", "GitLab"]
categories:
  - git
  - github
  - gitlab
---

コンパイルを行い、実行ファイルを作ることのできるとする。
さらに、そのプロジェクトを Git などで管理するとする。

このとき、「実行ファイル」を作るたびにステージングされてしまって少し面倒だった。

特に Mac を使っていると、実行ファイルには拡張子のない。
これはソースコードをコンパイルすることで作ることができるし、コードを更新すると異なるものになることもあるので、トラックして欲しくない。

( Windows だったら `.exe` みたいな拡張子がつくし、Mac でも `-o` option とか毎回指定してあげればいいという話もあるのは重々承知している。その上でこの方法を紹介する、メリット、デメリット込みで。)

さて、拡張子や決まった命名のないファイルを `.gitignore` でどうやって補足するか？

## 一種の方法
少し無理矢理感があるような気もするが、以下の方法を取ればとりあえずは補足することができる。

「拡張子がないファイル」を無視するのではなく、

```
全体 (すべてのファイルとディレクトリ)
  - すべてのディレクトリ
  - すべての拡張子のついたファイル
```

で記述すれば良い。集合論的な考え方ですね。補集合って呼べばいいのでしょうか...

`.gitignore` のような設定ファイルでは、上から順に評価されるため、先頭に記述しないと動かない

( `#` 以降はコメントです。 )

```.gitignore
*     # すべてのファイルを無視
!*/   # すべてのディレクトリを無視しない
!*.*  #  すべての拡張子のある (. のついた) ファイルを無視しない

# your configration below
```

もう GitHub にあげちゃったよ、とか、コミットしちゃったよ、という方は以下を実行すると良いと思う。

**`--cached`がないと、ローカルファイルも削除されるので注意。**

```sh
git rm --cached *
```

やべ、ミスった、という方 ( git rm で削除してしまった )

誤ってローカルにあるファイルも削除してしまった、という場合は、とりあえず深呼吸をして落ち着き
以下を参考に元に戻すことがでいるかと思います。( 責任は取れませんが... )

```sh
git reset HEAD {削除したファイルまでのパス}
git checkout HEAD {削除したファイルパス}
```

```sh
git reset HEAD .
git checkout HEAD .
```


## **注意**

これは「拡張子のないファイルを gitignore する方法」であり、「実行ファイルを ignore する方法」ではありません。
なので、デフォルトで拡張子がないファイル ( `Dockerfile` や `Makefile` など ) も ignore されてしまいます。

実行ファイルはその度に削除するか、staging されるのをこちらが無視し続けるしかないんですかね...


## LINKS
* [gitで実行ファイルを無視する](https://qiita.com/padawan_e15/items/7ba90f09e3ecd559f95b)

* [git rm したファイルを元に戻す方法](https://qiita.com/shungok/items/82a06b1c4c93922a8622)
* [gitの管理対象から特定のファイル、ディレクトリを削除する](https://qiita.com/ytkt/items/a2afd6be8e4f06c1ea25)


