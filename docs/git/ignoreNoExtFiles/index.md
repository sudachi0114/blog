---
id: git-ignore-binary
title: "拡張子のないファイルの gitignore"
sidebar_label: "拡張子のないファイルの gitignore"
hide_table_of_contents: false
keywords:
  - git
  - github
  - gitlab
---

<!-- date: 2020-10-16T18:00:57+09:00 -->

## TL;DR

* 実行ファイルなどのバイナリを ignore したい場合は、以下の2つのどちらかを取るのが better だと思う。

1. ビルド時にバイナリファイルの名前を指定するようにして、その名前を `.gitgnore` に記載する。
2. `bin` などのディレクトリを切って、その下にバイナリを吐き出すようにする。そして `bin` ディレクトリごと ignore する


## 「拡張子のないファイル 『全て』 」を ignore する (元やったこと)

コンパイルを行い、実行ファイルを作るような言語で開発しているプロジェクトを git で管理しているとする。

このとき、「実行ファイル」を作るたびにステージングされてしまうのがめんどくさい..

( windows/mac を見越して `.exe, .out` みたいな拡張子を ignore するという方法もあるとは思う。

`-o` option とかでビルド毎に指定する方法もある。<- 上で述べた通り

その上でこの方法を紹介する、メリット、デメリット込みで。)

さて、拡張子や決まった命名のないファイルを `.gitignore` でどうやって ignore するか?


### 一種の方法
少し無理矢理感があるような気もするが、以下の方法により「拡張子のないファイル『全て』」を ignore することができる。

コロンブスの卵的な発送で「拡張子がないファイル」を無視するのではなく、

```
{全体 (すべてのファイルとディレクトリ) を ignore} - {すべてのディレクトリを ignore しない} - {すべての拡張子のついたファイルを ignore しない}
```

という表現で記述する。

集合論的な考え方ですね。補集合って呼べばいいのでしょうか...

---

`.gitignore` のような設定ファイルでは、上から順に評価されるため、先頭に記述しないと動かない

( `#` 以降はコメントです。 )

```.gitignore
*     # すべてのファイルを無視
!*/   # すべてのディレクトリを無視しない
!*.*  # すべての拡張子のある (. のついた) ファイルを無視しない

# your configration below
```

---

もう GitHub にあげちゃったよ、とか、コミットしちゃったよ、という方は以下を実行すると良いと思う。

* **`--cached`がないと、ローカルファイルも削除されるので注意。**

```sh
git rm --cached *
```

やべ、ミスった、という方 ( git rm で削除してしまった )

誤ってローカルにあるファイルも削除してしまった、という場合は、とりあえず深呼吸をして落ち着き
以下を参考に元に戻すことがでいるかと思います。( 責任は取れませんが... )

```sh
git reset HEAD {削除したファイルまでのパス}
git checkout HEAD {削除したファイルパス}
```

```sh
git reset HEAD .
git checkout HEAD .
```

---

* **注意**

これは「拡張子のないファイルを gitignore する方法」であり、「実行ファイルを ignore する方法」ではありません。
なので、デフォルトで拡張子がないファイル ( `Dockerfile` や `Makefile` など ) も ignore されてしまいます。

実行ファイルはその度に削除するか、staging されるのをこちらが無視し続けるしかないんですかね...


## LINKS
* [gitで実行ファイルを無視する](https://qiita.com/padawan_e15/items/7ba90f09e3ecd559f95b)

* [git rm したファイルを元に戻す方法](https://qiita.com/shungok/items/82a06b1c4c93922a8622)
* [gitの管理対象から特定のファイル、ディレクトリを削除する](https://qiita.com/ytkt/items/a2afd6be8e4f06c1ea25)


